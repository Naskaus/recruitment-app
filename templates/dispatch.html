    {% extends "base.html" %}

    {% block content %}
    <style>
        /* Grid layout styles for the assignment modal form */
        .form-grid-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem 1.5rem; /* vertical horizontal */
            align-items: start;
        }
        .form-grid-layout .form-group {
            display: flex;
            flex-direction: column;
        }
        .form-grid-layout .form-group-full-width {
            grid-column: 1 / -1; /* Span across both columns */
        }
    </style>

    <div class="page-header">
        <h2>Dispatch Board</h2>
        <!-- NEW: Filter controls -->
        <div class="filter-controls">
            <label for="statusFilter">Filter available staff:</label>
            <select id="statusFilter">
                <option value="all">All Statuses</option>
                {% for status in statuses %}
                    <option value="{{ status | lower | replace(' ', '-') }}">{{ status }}</option>
                {% endfor %}
            </select>
        </div>
    </div>

    <div class="dispatch-board">
        <div class="dispatch-column">
            <div class="dispatch-column-header">
                <h3>Available</h3>
                <span class="staff-count" id="available-staff-count">{{ available_staff|length }}</span>
            </div>
            <div class="dispatch-list" data-venue="available">
                {% for s in available_staff %}
                <!-- MODIFIED: Added data-status attribute -->
                <div class="dispatch-card" data-id="{{ s.id }}" data-status="{{ s.status | lower | replace(' ', '-') }}">
                    <img src="{{ s.photo_url }}" alt="{{ s.nickname }}">
                    <div class="dispatch-card-info">
                        <strong>{{ s.nickname }}</strong>
                        <span>{{ s.first_name or '' }}</span>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>

        {% for v in venues %}
        <div class="dispatch-column">
            <div class="dispatch-column-header">
                <h3>{{ v }}</h3>
                <span class="staff-count">{{ dispatched_staff[v]|length }}</span>
            </div>
            <div class="dispatch-list" data-venue="{{ v }}">
                {% for s in dispatched_staff[v] %}
                <div class="dispatch-card" data-id="{{ s.id }}">
                    <img src="{{ s.photo_url }}" alt="{{ s.nickname }}">
                    <div class="dispatch-card-info">
                        <strong>{{ s.nickname }}</strong>
                        <span>{{ s.first_name or '' }}</span>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        {% endfor %}
    </div>
    {% endblock %}
    